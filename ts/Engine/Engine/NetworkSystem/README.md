# 服务器和客户端共享文件

## 通用信息
这部分信息，在不同游戏之间能够复用，先在服务器上写，在复制到客户端使用
* 用户
* 房间

## 游戏专属信息
不同游戏有不同游戏信息，以及发送方式，需要在客户端定义，拷贝到服务端使用



# Manager的基本思路
服务端管理的是整个服务器的数据
它会在某个**事件触发时**选择是否将事件同步给客户端

客户端只管理和自己有关的数据
例子：UserManager，在服务器上存的是所有用户，而客户端，存的可能是一个房间内的所有User的信息

被标记为**客户端同步**的数据，将在服务器发生变化时发送给房间内的用户，
比如当一个新玩家加入了房间，需要将整个**房间信息**发送给**加入者**（有时可能会包括加入者本身的信息，因为在加入房间之后，用户可能会被分配一个房间内的用户ID，从而导致用户数据发生变化）


# 心跳包由服务器发送还是客户端发送？

服务端更关心客户端的状态，因为可能有多个客户端同时和一个客户端产生关系
如果在一场比赛的准备阶段，规定有一个玩家退出房间则取消比赛，服务器需要知道当前所有客户端的状态，当某个客户端没有应答时，则判定为玩家退出房间，立刻取消比赛，并通知其它客户端。
在此过程中，由于**判定规则（逻辑）**运行在服务端，是服务端要求客户端**必须**汇报状态
大多数情况下，只要连接没有断开，服务器肯定是在的，客户端就不一定了



# 登录逻辑
客户端主动连接服务器
服务器收到连接并建立连接，创建Bean，**返回连接唯一标识** （此时服务器并不知道这个连接是谁）
客户端收到连接成功信号，将连接标识存下来（断线重连时用），**发送登录请求，账号和密码**
服务器执行登录操作，修改Bean，返回登录状态


